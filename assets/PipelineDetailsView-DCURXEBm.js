import{_ as fe,r as v,o as ve,p as ge,c as y,a as l,g,b as t,h as M,w as n,d as s,t as i,q as _e,n as we,e as c,f as r,F as N,i as O,k as xe}from"./index-DvHs-uuO.js";const be={class:"d-flex align-center mb-4"},Se={class:"text-h4 mr-4"},ye={class:"d-flex mb-4"},De={class:"d-flex mb-4"},Pe={class:"d-flex mb-4"},Ce={class:"d-flex mb-4"},Re={class:"d-flex mb-4"},Ee={class:"d-flex align-center"},Ie={class:"font-weight-bold"},Ve={class:"text-caption"},Le={key:0},Te={class:"app-log-text"},ke={__name:"PipelineDetailsView",setup(Ae){const R=_e();we();const u=v(null),k=v(!1),x=v([]),E=v(!1),D=v(!1),d=v(null),I=v(!1),_=v({saveResults:!0,notifyOnCompletion:!1,maxRows:0,debugMode:!1}),A=v(null);function V(o){switch(o==null?void 0:o.toLowerCase()){case"completed":return"success";case"running":return"info";case"failed":return"error";case"cancelled":return"warning";case"active":return"success";case"inactive":return"error";default:return"grey"}}function G(o){switch(o==null?void 0:o.toLowerCase()){case"extract":return"blue";case"transform":return"green";case"load":return"purple";default:return"grey"}}function H(o){switch(o==null?void 0:o.toLowerCase()){case"extract":return"blue";case"transform":return"green";case"load":return"purple";default:return"grey"}}function K(o){switch(o==null?void 0:o.toLowerCase()){case"extract":return"mdi-database-export";case"transform":return"mdi-cog-transfer";case"load":return"mdi-database-import";default:return"mdi-cog"}}function X(o){switch(o==null?void 0:o.toLowerCase()){case"sql":return"mdi-database";case"rest api":return"mdi-api";case"file":return"mdi-file";case"sftp":return"mdi-server";default:return"mdi-database"}}function P(o,e=!1){if(!o)return"-";const m=new Date(o);return e?m.toLocaleString():m.toLocaleDateString()+" "+m.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function F(o){if(!o)return"-";const e=Math.floor(o/1e3);if(e<60)return`${e}s`;const m=Math.floor(e/60);return m<60?`${m}m ${e%60}s`:`${Math.floor(m/60)}h ${m%60}m`}async function Y(){try{k.value=!0,await new Promise(o=>setTimeout(o,500)),u.value={id:R.params.id,name:"Sales Data ETL",description:"Extract sales data from CRM, transform, and load to data warehouse",status:"Active",createdAt:new Date(Date.now()-60*24*60*60*1e3).toISOString(),lastRun:new Date(Date.now()-2*60*60*1e3).toISOString(),schedule:"Daily at 02:00 AM",dataSources:[{id:"1",name:"CRM Database",type:"SQL",isConnected:!0},{id:"2",name:"Product Catalog API",type:"REST API",isConnected:!0}],steps:[{id:"1",name:"Extract Sales Data",type:"Extract",description:"Pull sales transactions from CRM database"},{id:"2",name:"Extract Product Data",type:"Extract",description:"Pull product details from Product API"},{id:"3",name:"Join Sales and Products",type:"Transform",description:"Join sales transactions with product details"},{id:"4",name:"Filter Invalid Transactions",type:"Transform",description:"Remove transactions with invalid product IDs or amounts"},{id:"5",name:"Aggregate by Region",type:"Transform",description:"Calculate sales totals by region and product category"},{id:"6",name:"Load to Data Warehouse",type:"Load",description:"Load processed data to the sales analytics table in data warehouse"}]},await $()}catch(o){console.error("Error fetching pipeline details:",o)}finally{k.value=!1}}async function $(){try{await new Promise(o=>setTimeout(o,300)),x.value=[{id:"1",pipelineId:R.params.id,status:"Completed",startTime:new Date(Date.now()-2*60*60*1e3).toISOString(),endTime:new Date(Date.now()-1.9*60*60*1e3).toISOString(),duration:36e4,rowsProcessed:12345,logs:`[2025-03-14 22:15:01] Starting extraction from source: SQL Server - Sales
[2025-03-14 22:15:03] Extracted 12345 rows from source
[2025-03-14 22:15:05] Applying 3 transformations
[2025-03-14 22:15:06] Applying transformation: Filter Inactive Customers
[2025-03-14 22:15:07] Applying transformation: Map Customer Segments
[2025-03-14 22:15:08] Applying transformation: Format Phone Numbers
[2025-03-14 22:15:09] Loading data to destination: Data Warehouse
[2025-03-14 22:15:11] Successfully loaded 12345 rows to destination`,progressPercent:100},{id:"2",pipelineId:R.params.id,status:"Failed",startTime:new Date(Date.now()-26*60*60*1e3).toISOString(),endTime:new Date(Date.now()-25.9*60*60*1e3).toISOString(),duration:18e4,rowsProcessed:0,logs:`[2025-03-13 00:30:01] Starting extraction from source: SQL Server - Sales
[2025-03-13 00:30:05] Error: Failed to connect to SQL Server. Connection timeout.
[2025-03-13 00:30:05] Execution failed: Failed to connect to SQL Server`,progressPercent:0},{id:"3",pipelineId:R.params.id,status:"Completed",startTime:new Date(Date.now()-50*60*60*1e3).toISOString(),endTime:new Date(Date.now()-49.9*60*60*1e3).toISOString(),duration:42e4,rowsProcessed:11532,logs:`[2025-03-12 00:15:01] Starting extraction from source: SQL Server - Sales
[2025-03-12 00:15:03] Extracted 11532 rows from source
[2025-03-12 00:15:05] Applying 3 transformations
[2025-03-12 00:15:06] Applying transformation: Filter Inactive Customers
[2025-03-12 00:15:07] Applying transformation: Map Customer Segments
[2025-03-12 00:15:08] Applying transformation: Format Phone Numbers
[2025-03-12 00:15:09] Loading data to destination: Data Warehouse
[2025-03-12 00:15:11] Successfully loaded 11532 rows to destination`,progressPercent:100}]}catch(o){console.error("Error fetching executions:",o)}}function Z(o){d.value={...o},E.value=!0}function ee(){alert("Pipeline edit functionality would be implemented here")}function te(){D.value=!0}async function U(){try{I.value=!0,await new Promise(e=>setTimeout(e,2e3));const o={id:Math.random().toString(36).substring(2,15),pipelineId:u.value.id,status:"Running",startTime:new Date().toISOString(),endTime:null,duration:0,rowsProcessed:0,logs:`[${new Date().toLocaleString()}] Starting pipeline execution...
[${new Date().toLocaleString()}] Extracting data from sources...`,progressPercent:5};x.value.unshift(o),u.value.lastRun=new Date().toISOString(),D.value=!1,alert("Pipeline execution started successfully!")}catch(o){console.error("Error running pipeline:",o)}finally{I.value=!1}}return ve(()=>{Y(),A.value=setInterval(()=>{x.value.length>0&&x.value[0].status==="Running"&&$()},1e4)}),ge(()=>{A.value&&clearInterval(A.value)}),(o,e)=>{var q,J,j;const m=s("v-icon"),p=s("v-btn"),C=s("v-chip"),L=s("v-spacer"),ne=s("v-progress-circular"),w=s("v-card-text"),f=s("v-card"),b=s("v-card-title"),le=s("v-list-item"),oe=s("v-list"),T=s("v-col"),ae=s("v-timeline-item"),se=s("v-timeline"),ie=s("v-table"),z=s("v-row"),Q=s("v-progress-linear"),B=s("v-card-actions"),W=s("v-dialog"),h=s("v-checkbox"),re=s("v-expansion-panel-title"),ue=s("v-text-field"),de=s("v-expansion-panel-text"),ce=s("v-expansion-panel"),me=s("v-expansion-panels"),pe=s("v-form");return c(),y("div",null,[l("div",be,[t(p,{icon:"",variant:"text",class:"mr-2",to:"/pipelines"},{default:n(()=>[t(m,null,{default:n(()=>e[8]||(e[8]=[r("mdi-arrow-left")])),_:1})]),_:1}),l("h1",Se,i(((q=u.value)==null?void 0:q.name)||"Pipeline Details"),1),(J=u.value)!=null&&J.status?(c(),g(C,{key:0,color:V(u.value.status),"text-color":"white",class:"ml-2"},{default:n(()=>[r(i(u.value.status),1)]),_:1},8,["color"])):M("",!0),t(L),t(p,{color:"primary","prepend-icon":"mdi-play",onClick:te,loading:I.value,disabled:((j=u.value)==null?void 0:j.status)==="Running",class:"mr-2"},{default:n(()=>e[9]||(e[9]=[r(" Run ")])),_:1},8,["loading","disabled"]),t(p,{color:"primary",variant:"outlined","prepend-icon":"mdi-pencil",onClick:ee,class:"mr-2"},{default:n(()=>e[10]||(e[10]=[r(" Edit ")])),_:1})]),k.value?(c(),g(f,{key:0,class:"mb-4"},{default:n(()=>[t(w,{class:"text-center pa-5"},{default:n(()=>[t(ne,{indeterminate:"",color:"primary"})]),_:1})]),_:1})):u.value?(c(),g(z,{key:1},{default:n(()=>[t(T,{cols:"12",md:"4"},{default:n(()=>[t(f,{class:"mb-4"},{default:n(()=>[t(b,null,{default:n(()=>e[11]||(e[11]=[r("Pipeline Information")])),_:1}),t(w,null,{default:n(()=>[l("div",ye,[e[12]||(e[12]=l("div",{class:"info-label"},"Name:",-1)),l("div",null,i(u.value.name),1)]),l("div",De,[e[13]||(e[13]=l("div",{class:"info-label"},"Description:",-1)),l("div",null,i(u.value.description||"No description provided"),1)]),l("div",Pe,[e[14]||(e[14]=l("div",{class:"info-label"},"Created:",-1)),l("div",null,i(P(u.value.createdAt)),1)]),l("div",Ce,[e[15]||(e[15]=l("div",{class:"info-label"},"Last Run:",-1)),l("div",null,i(u.value.lastRun?P(u.value.lastRun):"Never"),1)]),l("div",Re,[e[16]||(e[16]=l("div",{class:"info-label"},"Schedule:",-1)),l("div",null,i(u.value.schedule||"Manual execution only"),1)])]),_:1})]),_:1}),t(f,null,{default:n(()=>[t(b,null,{default:n(()=>e[17]||(e[17]=[r("Data Sources")])),_:1}),t(w,null,{default:n(()=>[t(oe,{density:"compact"},{default:n(()=>[(c(!0),y(N,null,O(u.value.dataSources,(a,S)=>(c(),g(le,{key:S,title:a.name,subtitle:a.type,"prepend-icon":X(a.type),ripple:!1},{append:n(()=>[t(C,{color:a.isConnected?"success":"error",size:"x-small",class:"ml-2"},{default:n(()=>[r(i(a.isConnected?"Connected":"Error"),1)]),_:2},1032,["color"])]),_:2},1032,["title","subtitle","prepend-icon"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}),t(T,{cols:"12",md:"8"},{default:n(()=>[t(f,{class:"mb-4"},{default:n(()=>[t(b,null,{default:n(()=>e[18]||(e[18]=[r("Pipeline Workflow")])),_:1}),t(w,null,{default:n(()=>[t(se,{density:"compact",align:"start"},{default:n(()=>[(c(!0),y(N,null,O(u.value.steps,(a,S)=>(c(),g(ae,{key:S,"dot-color":G(a.type),icon:K(a.type)},{default:n(()=>[l("div",Ee,[l("div",Ie,i(a.name),1),t(C,{size:"x-small",class:"ml-2",color:H(a.type),"text-color":"white"},{default:n(()=>[r(i(a.type),1)]),_:2},1032,["color"])]),l("div",Ve,i(a.description),1)]),_:2},1032,["dot-color","icon"]))),128))]),_:1})]),_:1})]),_:1}),t(f,null,{default:n(()=>[t(b,{class:"d-flex align-center"},{default:n(()=>[e[20]||(e[20]=l("span",null,"Recent Executions",-1)),t(L),t(p,{variant:"text",size:"small",to:"/executions"},{default:n(()=>e[19]||(e[19]=[r(" View All ")])),_:1})]),_:1}),t(w,null,{default:n(()=>[t(ie,null,{default:n(()=>[e[23]||(e[23]=l("thead",null,[l("tr",null,[l("th",null,"Execution ID"),l("th",null,"Status"),l("th",null,"Start Time"),l("th",null,"Duration"),l("th",null,"Rows Processed"),l("th",null,"Actions")])],-1)),l("tbody",null,[(c(!0),y(N,null,O(x.value,a=>{var S;return c(),y("tr",{key:a.id},[l("td",null,i(a.id),1),l("td",null,[t(C,{color:V(a.status),"text-color":"white",size:"x-small"},{default:n(()=>[r(i(a.status),1)]),_:2},1032,["color"])]),l("td",null,i(P(a.startTime)),1),l("td",null,i(F(a.duration)),1),l("td",null,i(((S=a.rowsProcessed)==null?void 0:S.toLocaleString())||"N/A"),1),l("td",null,[t(p,{icon:"",variant:"text",size:"small",onClick:he=>Z(a),title:"View details"},{default:n(()=>[t(m,null,{default:n(()=>e[21]||(e[21]=[r("mdi-eye")])),_:1})]),_:2},1032,["onClick"])])])}),128)),x.value.length===0?(c(),y("tr",Le,e[22]||(e[22]=[l("td",{colspan:"6",class:"text-center"},"No executions yet",-1)]))):M("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):(c(),g(f,{key:2},{default:n(()=>[t(w,{class:"text-center pa-5"},{default:n(()=>e[24]||(e[24]=[r(" Pipeline not found ")])),_:1})]),_:1})),t(W,{modelValue:E.value,"onUpdate:modelValue":e[1]||(e[1]=a=>E.value=a),"max-width":"900px"},{default:n(()=>[d.value?(c(),g(f,{key:0},{default:n(()=>[t(b,{class:"d-flex align-center"},{default:n(()=>[e[25]||(e[25]=l("span",null,"Execution Details",-1)),t(C,{color:V(d.value.status),"text-color":"white",size:"small",class:"ml-4"},{default:n(()=>[r(i(d.value.status),1)]),_:1},8,["color"])]),_:1}),t(w,null,{default:n(()=>[t(z,null,{default:n(()=>[t(T,{cols:"12",md:"6"},{default:n(()=>{var a;return[e[26]||(e[26]=l("div",{class:"text-subtitle-1 font-weight-bold mb-2"},"Execution ID",-1)),l("p",null,i(d.value.id),1),e[27]||(e[27]=l("div",{class:"text-subtitle-1 font-weight-bold mb-2 mt-4"},"Start Time",-1)),l("p",null,i(P(d.value.startTime,!0)),1),e[28]||(e[28]=l("div",{class:"text-subtitle-1 font-weight-bold mb-2 mt-4"},"End Time",-1)),l("p",null,i(d.value.endTime?P(d.value.endTime,!0):"Running"),1),e[29]||(e[29]=l("div",{class:"text-subtitle-1 font-weight-bold mb-2 mt-4"},"Duration",-1)),l("p",null,i(F(d.value.duration)),1),e[30]||(e[30]=l("div",{class:"text-subtitle-1 font-weight-bold mb-2 mt-4"},"Rows Processed",-1)),l("p",null,i(((a=d.value.rowsProcessed)==null?void 0:a.toLocaleString())||"N/A"),1)]}),_:1}),t(T,{cols:"12",md:"6"},{default:n(()=>[e[31]||(e[31]=l("div",{class:"text-subtitle-1 font-weight-bold mb-2"},"Progress",-1)),d.value.status==="Running"?(c(),g(Q,{key:0,modelValue:d.value.progressPercent||0,color:"primary",height:"20",rounded:"",striped:""},{default:n(()=>[r(i(Math.round(d.value.progressPercent||0))+"% ",1)]),_:1},8,["modelValue"])):(c(),g(Q,{key:1,modelValue:100,color:V(d.value.status),height:"20",rounded:""},{default:n(()=>[r(i(d.value.status),1)]),_:1},8,["color"])),e[32]||(e[32]=l("div",{class:"text-subtitle-1 font-weight-bold mb-2 mt-4"},"Execution Logs",-1)),t(f,{variant:"outlined",class:"app-log-container custom-scrollbar"},{default:n(()=>[l("pre",Te,i(d.value.logs||"No logs available"),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(B,null,{default:n(()=>[t(L),t(p,{variant:"text",onClick:e[0]||(e[0]=a=>E.value=!1)},{default:n(()=>e[33]||(e[33]=[r(" Close ")])),_:1})]),_:1})]),_:1})):M("",!0)]),_:1},8,["modelValue"]),t(W,{modelValue:D.value,"onUpdate:modelValue":e[7]||(e[7]=a=>D.value=a),"max-width":"500px"},{default:n(()=>[t(f,null,{default:n(()=>[t(b,null,{default:n(()=>e[34]||(e[34]=[r("Run Pipeline")])),_:1}),t(w,null,{default:n(()=>[e[36]||(e[36]=l("p",null,"Are you sure you want to run this pipeline?",-1)),t(pe,{ref:"runForm",onSubmit:xe(U,["prevent"])},{default:n(()=>[t(h,{modelValue:_.value.saveResults,"onUpdate:modelValue":e[2]||(e[2]=a=>_.value.saveResults=a),label:"Save results to destination","hide-details":"",class:"mb-3"},null,8,["modelValue"]),t(h,{modelValue:_.value.notifyOnCompletion,"onUpdate:modelValue":e[3]||(e[3]=a=>_.value.notifyOnCompletion=a),label:"Notify me when complete","hide-details":"",class:"mb-3"},null,8,["modelValue"]),t(me,null,{default:n(()=>[t(ce,null,{default:n(()=>[t(re,null,{default:n(()=>e[35]||(e[35]=[r("Advanced Options")])),_:1}),t(de,null,{default:n(()=>[t(ue,{modelValue:_.value.maxRows,"onUpdate:modelValue":e[4]||(e[4]=a=>_.value.maxRows=a),label:"Max Rows (0 for unlimited)",type:"number",hint:"Limit the number of rows to process","persistent-hint":"",class:"mb-3"},null,8,["modelValue"]),t(h,{modelValue:_.value.debugMode,"onUpdate:modelValue":e[5]||(e[5]=a=>_.value.debugMode=a),label:"Debug Mode",hint:"Enable detailed logging for debugging","persistent-hint":"","hide-details":"",class:"mb-3"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),t(B,null,{default:n(()=>[t(L),t(p,{variant:"text",onClick:e[6]||(e[6]=a=>D.value=!1)},{default:n(()=>e[37]||(e[37]=[r(" Cancel ")])),_:1}),t(p,{color:"primary",onClick:U,loading:I.value},{default:n(()=>e[38]||(e[38]=[r(" Run Now ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},Ne=fe(ke,[["__scopeId","data-v-d0820f5d"]]);export{Ne as default};
