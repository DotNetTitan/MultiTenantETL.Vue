import{j as ie,x as re,r as i,o as me,c as ve,a as v,b as l,w as t,d as u,e as $,f as d,k as F,g as fe,h as pe,t as B}from"./index-DvHs-uuO.js";const ce={__name:"SettingsView",setup(be){ie();const q=re(),x=i("profile"),m=i({firstName:"",lastName:"",email:"",phone:"",jobTitle:"",bio:""}),I=i(!1),p=i({current:"",new:"",confirm:""}),r=i({darkMode:!1,highContrast:!1,defaultDashboardView:"pipeline-stats",dashboardRefreshInterval:60,defaultItemsPerPage:25,dateFormat:"MM/DD/YYYY"}),Y=i(!1),w=i([]),N=i(!1),M=i(!1),C=i(!1),c=i(!1),T=i(null),V=i(null),O=[{title:"Name",key:"name"},{title:"Created",key:"createdAt"},{title:"Last Used",key:"lastUsed"},{title:"Actions",key:"actions",sortable:!1,align:"end"}],s=i({emailEnabled:!1,emailAddress:"",webhookEnabled:!1,webhookUrl:"",events:{pipelineSuccess:!1,pipelineFailure:!0,dataSourceDown:!0,quotaExceeded:!0,systemUpdates:!1}}),K=i(!1);function h(o){return o?new Date(o).toLocaleString():"-"}async function W(o){try{await navigator.clipboard.writeText(o)}catch(e){console.error("Failed to copy to clipboard:",e)}}function j(){q.global.name.value=r.value.darkMode?"dark":"light"}async function H(){try{await new Promise(o=>setTimeout(o,500)),m.value={firstName:"John",lastName:"Doe",email:"john.doe@example.com",phone:"(555) 123-4567",jobTitle:"Data Engineer",bio:"Experienced data engineer with a focus on ETL processes and data integration."},r.value={darkMode:q.global.current.value.dark,highContrast:!1,defaultDashboardView:"pipeline-stats",dashboardRefreshInterval:60,defaultItemsPerPage:25,dateFormat:"MM/DD/YYYY"},s.value={emailEnabled:!0,emailAddress:"john.doe@example.com",webhookEnabled:!1,webhookUrl:"",events:{pipelineSuccess:!1,pipelineFailure:!0,dataSourceDown:!0,quotaExceeded:!0,systemUpdates:!1}}}catch(o){console.error("Error loading user data:",o)}}async function J(){try{N.value=!0,await new Promise(o=>setTimeout(o,500)),w.value=[{id:"1",name:"Development Key",createdAt:new Date(Date.now()-30*24*60*60*1e3).toISOString(),lastUsed:new Date(Date.now()-2*24*60*60*1e3).toISOString()},{id:"2",name:"Production Key",createdAt:new Date(Date.now()-60*24*60*60*1e3).toISOString(),lastUsed:new Date(Date.now()-1*24*60*60*1e3).toISOString()}]}catch(o){console.error("Error loading API keys:",o)}finally{N.value=!1}}async function z(){try{I.value=!0,p.value.current&&p.value.new&&(p.value={current:"",new:"",confirm:""}),await new Promise(o=>setTimeout(o,1e3))}catch(o){console.error("Error saving profile:",o)}finally{I.value=!1}}async function Q(){try{Y.value=!0,await new Promise(o=>setTimeout(o,1e3)),j()}catch(o){console.error("Error saving preferences:",o)}finally{Y.value=!1}}async function Z(){try{K.value=!0,await new Promise(o=>setTimeout(o,1e3))}catch(o){console.error("Error saving notification settings:",o)}finally{K.value=!1}}async function G(){try{M.value=!0,await new Promise(e=>setTimeout(e,1e3));const o=`API Key ${w.value.length+1}`;V.value=`etl_${Math.random().toString(36).substr(2,9)}_${Math.random().toString(36).substr(2,9)}`,w.value.push({id:Math.random().toString(36).substr(2,9),name:o,createdAt:new Date().toISOString(),lastUsed:null})}catch(o){console.error("Error creating API key:",o)}finally{M.value=!1}}function X(o){T.value=o,c.value=!0}async function ee(){try{C.value=!0,await new Promise(e=>setTimeout(e,1e3));const o=w.value.findIndex(e=>e.id===T.value.id);o!==-1&&w.value.splice(o,1),c.value=!1,T.value=null}catch(o){console.error("Error revoking API key:",o)}finally{C.value=!1}}return me(async()=>{await H(),await J()}),(o,e)=>{const E=u("v-tab"),le=u("v-tabs"),g=u("v-card-title"),f=u("v-text-field"),n=u("v-col"),ae=u("v-textarea"),b=u("v-row"),k=u("v-divider"),y=u("v-btn"),R=u("v-form"),P=u("v-card-text"),D=u("v-card"),_=u("v-window-item"),A=u("v-switch"),S=u("v-select"),L=u("v-spacer"),te=u("v-alert"),oe=u("v-icon"),ne=u("v-data-table"),U=u("v-checkbox"),se=u("v-window"),ue=u("v-card-actions"),de=u("v-dialog");return $(),ve("div",null,[e[57]||(e[57]=v("h1",{class:"text-h4 mb-6"},"Settings",-1)),l(le,{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=a=>x.value=a),class:"mb-6"},{default:t(()=>[l(E,{value:"profile"},{default:t(()=>e[30]||(e[30]=[d("User Profile")])),_:1}),l(E,{value:"preferences"},{default:t(()=>e[31]||(e[31]=[d("Preferences")])),_:1}),l(E,{value:"apiKeys"},{default:t(()=>e[32]||(e[32]=[d("API Keys")])),_:1}),l(E,{value:"notifications"},{default:t(()=>e[33]||(e[33]=[d("Notifications")])),_:1})]),_:1},8,["modelValue"]),l(se,{modelValue:x.value,"onUpdate:modelValue":e[27]||(e[27]=a=>x.value=a)},{default:t(()=>[l(_,{value:"profile"},{default:t(()=>[l(D,null,{default:t(()=>[l(g,null,{default:t(()=>e[34]||(e[34]=[d("User Profile")])),_:1}),l(P,null,{default:t(()=>[l(R,{onSubmit:F(z,["prevent"])},{default:t(()=>[l(b,null,{default:t(()=>[l(n,{cols:"12",md:"6"},{default:t(()=>[l(f,{modelValue:m.value.firstName,"onUpdate:modelValue":e[1]||(e[1]=a=>m.value.firstName=a),label:"First Name",required:""},null,8,["modelValue"])]),_:1}),l(n,{cols:"12",md:"6"},{default:t(()=>[l(f,{modelValue:m.value.lastName,"onUpdate:modelValue":e[2]||(e[2]=a=>m.value.lastName=a),label:"Last Name",required:""},null,8,["modelValue"])]),_:1}),l(n,{cols:"12",md:"6"},{default:t(()=>[l(f,{modelValue:m.value.email,"onUpdate:modelValue":e[3]||(e[3]=a=>m.value.email=a),label:"Email",type:"email",required:"",rules:[a=>!!a||"Email is required",a=>/.+@.+\..+/.test(a)||"Email must be valid"]},null,8,["modelValue","rules"])]),_:1}),l(n,{cols:"12",md:"6"},{default:t(()=>[l(f,{modelValue:m.value.phone,"onUpdate:modelValue":e[4]||(e[4]=a=>m.value.phone=a),label:"Phone Number"},null,8,["modelValue"])]),_:1}),l(n,{cols:"12"},{default:t(()=>[l(f,{modelValue:m.value.jobTitle,"onUpdate:modelValue":e[5]||(e[5]=a=>m.value.jobTitle=a),label:"Job Title"},null,8,["modelValue"])]),_:1}),l(n,{cols:"12"},{default:t(()=>[l(ae,{modelValue:m.value.bio,"onUpdate:modelValue":e[6]||(e[6]=a=>m.value.bio=a),label:"Bio",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1}),l(k,{class:"my-4"}),e[36]||(e[36]=v("h3",{class:"text-h6 mb-4"},"Change Password",-1)),l(b,null,{default:t(()=>[l(n,{cols:"12",md:"4"},{default:t(()=>[l(f,{modelValue:p.value.current,"onUpdate:modelValue":e[7]||(e[7]=a=>p.value.current=a),label:"Current Password",type:"password",autocomplete:"current-password"},null,8,["modelValue"])]),_:1}),l(n,{cols:"12",md:"4"},{default:t(()=>[l(f,{modelValue:p.value.new,"onUpdate:modelValue":e[8]||(e[8]=a=>p.value.new=a),label:"New Password",type:"password",autocomplete:"new-password",rules:[a=>!a||a.length>=8||"Password must be at least 8 characters",a=>!a||/[A-Z]/.test(a)||"Password must contain at least one uppercase letter",a=>!a||/[0-9]/.test(a)||"Password must contain at least one number"]},null,8,["modelValue","rules"])]),_:1}),l(n,{cols:"12",md:"4"},{default:t(()=>[l(f,{modelValue:p.value.confirm,"onUpdate:modelValue":e[9]||(e[9]=a=>p.value.confirm=a),label:"Confirm New Password",type:"password",autocomplete:"new-password",rules:[a=>a===p.value.new||"Passwords do not match"]},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(y,{color:"primary",type:"submit",class:"mt-4",loading:I.value},{default:t(()=>e[35]||(e[35]=[d(" Save Changes ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1}),l(_,{value:"preferences"},{default:t(()=>[l(D,null,{default:t(()=>[l(g,null,{default:t(()=>e[37]||(e[37]=[d("Preferences")])),_:1}),l(P,null,{default:t(()=>[l(R,{onSubmit:F(Q,["prevent"])},{default:t(()=>[e[39]||(e[39]=v("h3",{class:"text-h6 mb-4"},"Theme",-1)),l(b,null,{default:t(()=>[l(n,{cols:"12",md:"6"},{default:t(()=>[l(A,{modelValue:r.value.darkMode,"onUpdate:modelValue":e[10]||(e[10]=a=>r.value.darkMode=a),label:"Dark Mode",color:"primary","hide-details":"",onChange:j},null,8,["modelValue"])]),_:1}),l(n,{cols:"12",md:"6"},{default:t(()=>[l(A,{modelValue:r.value.highContrast,"onUpdate:modelValue":e[11]||(e[11]=a=>r.value.highContrast=a),label:"High Contrast",color:"primary","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),l(k,{class:"my-6"}),e[40]||(e[40]=v("h3",{class:"text-h6 mb-4"},"Dashboard",-1)),l(b,null,{default:t(()=>[l(n,{cols:"12",md:"6"},{default:t(()=>[l(S,{modelValue:r.value.defaultDashboardView,"onUpdate:modelValue":e[12]||(e[12]=a=>r.value.defaultDashboardView=a),label:"Default Dashboard View",items:[{title:"Pipeline Stats",value:"pipeline-stats"},{title:"Recent Executions",value:"recent-executions"},{title:"Data Source Health",value:"data-source-health"}]},null,8,["modelValue"])]),_:1}),l(n,{cols:"12",md:"6"},{default:t(()=>[l(S,{modelValue:r.value.dashboardRefreshInterval,"onUpdate:modelValue":e[13]||(e[13]=a=>r.value.dashboardRefreshInterval=a),label:"Dashboard Refresh Interval",items:[{title:"Never",value:0},{title:"30 seconds",value:30},{title:"1 minute",value:60},{title:"5 minutes",value:300},{title:"15 minutes",value:900}]},null,8,["modelValue"])]),_:1})]),_:1}),l(k,{class:"my-6"}),e[41]||(e[41]=v("h3",{class:"text-h6 mb-4"},"Data View",-1)),l(b,null,{default:t(()=>[l(n,{cols:"12",md:"6"},{default:t(()=>[l(S,{modelValue:r.value.defaultItemsPerPage,"onUpdate:modelValue":e[14]||(e[14]=a=>r.value.defaultItemsPerPage=a),label:"Default Items Per Page",items:[{title:"10 items",value:10},{title:"25 items",value:25},{title:"50 items",value:50},{title:"100 items",value:100}]},null,8,["modelValue"])]),_:1}),l(n,{cols:"12",md:"6"},{default:t(()=>[l(S,{modelValue:r.value.dateFormat,"onUpdate:modelValue":e[15]||(e[15]=a=>r.value.dateFormat=a),label:"Date Format",items:[{title:"MM/DD/YYYY",value:"MM/DD/YYYY"},{title:"DD/MM/YYYY",value:"DD/MM/YYYY"},{title:"YYYY-MM-DD",value:"YYYY-MM-DD"}]},null,8,["modelValue"])]),_:1})]),_:1}),l(y,{color:"primary",type:"submit",class:"mt-4",loading:Y.value},{default:t(()=>e[38]||(e[38]=[d(" Save Preferences ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1}),l(_,{value:"apiKeys"},{default:t(()=>[l(D,null,{default:t(()=>[l(g,{class:"d-flex align-center"},{default:t(()=>[e[43]||(e[43]=v("span",null,"API Keys",-1)),l(L),l(y,{color:"primary","prepend-icon":"mdi-plus",onClick:G,loading:M.value},{default:t(()=>e[42]||(e[42]=[d(" Create API Key ")])),_:1},8,["loading"])]),_:1}),l(P,null,{default:t(()=>[e[47]||(e[47]=v("p",{class:"mb-4"}," API keys allow you to authenticate requests to the ETL Platform API. Keep your API keys secure; anyone with your API key can make API calls on your behalf. ",-1)),V.value?($(),fe(te,{key:0,type:"info",variant:"outlined",class:"mb-4"},{default:t(()=>[e[44]||(e[44]=v("p",null,[v("strong",null,"Your new API key has been created.")],-1)),e[45]||(e[45]=v("p",null,"This is the only time the API key will be displayed. Please copy it now:",-1)),l(f,{modelValue:V.value,"onUpdate:modelValue":e[16]||(e[16]=a=>V.value=a),readonly:"",class:"mt-2","append-inner-icon":"mdi-content-copy","onClick:appendInner":e[17]||(e[17]=a=>W(V.value))},null,8,["modelValue"])]),_:1})):pe("",!0),l(ne,{headers:O,items:w.value,loading:N.value},{"item.createdAt":t(({item:a})=>[d(B(h(a.createdAt)),1)]),"item.lastUsed":t(({item:a})=>[d(B(a.lastUsed?h(a.lastUsed):"Never"),1)]),"item.actions":t(({item:a})=>[l(y,{icon:"",variant:"text",size:"small",color:"error",onClick:ye=>X(a),title:"Revoke key"},{default:t(()=>[l(oe,null,{default:t(()=>e[46]||(e[46]=[d("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]),_:1},8,["items","loading"])]),_:1})]),_:1})]),_:1}),l(_,{value:"notifications"},{default:t(()=>[l(D,null,{default:t(()=>[l(g,null,{default:t(()=>e[48]||(e[48]=[d("Notification Settings")])),_:1}),l(P,null,{default:t(()=>[l(R,{onSubmit:F(Z,["prevent"])},{default:t(()=>[e[50]||(e[50]=v("h3",{class:"text-h6 mb-4"},"Email Notifications",-1)),l(b,null,{default:t(()=>[l(n,{cols:"12",md:"6"},{default:t(()=>[l(A,{modelValue:s.value.emailEnabled,"onUpdate:modelValue":e[18]||(e[18]=a=>s.value.emailEnabled=a),label:"Enable Email Notifications",color:"primary","hide-details":""},null,8,["modelValue"])]),_:1}),l(n,{cols:"12",md:"6"},{default:t(()=>[l(f,{modelValue:s.value.emailAddress,"onUpdate:modelValue":e[19]||(e[19]=a=>s.value.emailAddress=a),label:"Notification Email",type:"email",disabled:!s.value.emailEnabled,rules:[a=>!s.value.emailEnabled||!!a||"Email is required"]},null,8,["modelValue","disabled","rules"])]),_:1})]),_:1}),l(k,{class:"my-6"}),e[51]||(e[51]=v("h3",{class:"text-h6 mb-4"},"Webhook Notifications",-1)),l(b,null,{default:t(()=>[l(n,{cols:"12",md:"6"},{default:t(()=>[l(A,{modelValue:s.value.webhookEnabled,"onUpdate:modelValue":e[20]||(e[20]=a=>s.value.webhookEnabled=a),label:"Enable Webhook Notifications",color:"primary","hide-details":""},null,8,["modelValue"])]),_:1}),l(n,{cols:"12",md:"6"},{default:t(()=>[l(f,{modelValue:s.value.webhookUrl,"onUpdate:modelValue":e[21]||(e[21]=a=>s.value.webhookUrl=a),label:"Webhook URL",disabled:!s.value.webhookEnabled,rules:[a=>!s.value.webhookEnabled||!!a||"Webhook URL is required"]},null,8,["modelValue","disabled","rules"])]),_:1})]),_:1}),l(k,{class:"my-6"}),e[52]||(e[52]=v("h3",{class:"text-h6 mb-4"},"Notification Events",-1)),l(b,null,{default:t(()=>[l(n,{cols:"12",md:"6"},{default:t(()=>[l(U,{modelValue:s.value.events.pipelineSuccess,"onUpdate:modelValue":e[22]||(e[22]=a=>s.value.events.pipelineSuccess=a),label:"Pipeline Execution Success","hide-details":""},null,8,["modelValue"])]),_:1}),l(n,{cols:"12",md:"6"},{default:t(()=>[l(U,{modelValue:s.value.events.pipelineFailure,"onUpdate:modelValue":e[23]||(e[23]=a=>s.value.events.pipelineFailure=a),label:"Pipeline Execution Failure","hide-details":""},null,8,["modelValue"])]),_:1}),l(n,{cols:"12",md:"6"},{default:t(()=>[l(U,{modelValue:s.value.events.dataSourceDown,"onUpdate:modelValue":e[24]||(e[24]=a=>s.value.events.dataSourceDown=a),label:"Data Source Connection Issues","hide-details":""},null,8,["modelValue"])]),_:1}),l(n,{cols:"12",md:"6"},{default:t(()=>[l(U,{modelValue:s.value.events.quotaExceeded,"onUpdate:modelValue":e[25]||(e[25]=a=>s.value.events.quotaExceeded=a),label:"Quota Exceeded","hide-details":""},null,8,["modelValue"])]),_:1}),l(n,{cols:"12",md:"6"},{default:t(()=>[l(U,{modelValue:s.value.events.systemUpdates,"onUpdate:modelValue":e[26]||(e[26]=a=>s.value.events.systemUpdates=a),label:"System Updates","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),l(y,{color:"primary",type:"submit",class:"mt-4",loading:K.value},{default:t(()=>e[49]||(e[49]=[d(" Save Notification Settings ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(de,{modelValue:c.value,"onUpdate:modelValue":e[29]||(e[29]=a=>c.value=a),"max-width":"400px"},{default:t(()=>[l(D,null,{default:t(()=>[l(g,{class:"text-h5"},{default:t(()=>e[53]||(e[53]=[d(" Revoke API Key ")])),_:1}),l(P,null,{default:t(()=>e[54]||(e[54]=[d(" Are you sure you want to revoke this API key? Any applications using this key will no longer be able to access the API. ")])),_:1}),l(ue,null,{default:t(()=>[l(L),l(y,{variant:"text",onClick:e[28]||(e[28]=a=>c.value=!1)},{default:t(()=>e[55]||(e[55]=[d(" Cancel ")])),_:1}),l(y,{color:"error",onClick:ee,loading:C.value},{default:t(()=>e[56]||(e[56]=[d(" Revoke ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{ce as default};
